$(document).ready(function(){$(".rte-zone").rte("css url","toolbox images url");jQuery("#postform").validate({rules:{title:"required"},messages:{title:"Bitte Titel eingeben."}});jQuery("#loginform").validate({rules:{password:"required",username:"required"},messages:{username:"Bitte Benutzernamen eingeben.",password:"Bitte Password eingeben."}});$(".commentdiv").each(function(c){$(this).hide()});$(".plus").unbind().click(function(){var c=$(this).parent().parent().find(".commentdiv");if(c.css("display")=="none"){$(this).css("background-position","0px 12px");c.slideDown("fast")}else{$(this).css("background-position","0px 0px");c.slideUp("fast")}});$(".delete-comment").unbind().click(function(){var e=$(this).attr("id");var c=e.indexOf("-");e=e.substr(c+1);var d=$(this).parent().parent().height();$(this).parent().parent().find("h5").fadeOut("fast");$(this).parent().parent().find("p").fadeOut("fast");$(this).parent().parent().find(".be-comment-loader").fadeIn("fast");$(this).parent().parent().css("height",d);$.ajax({url:"backend.php?id="+e+"&action=delete_comment",context:$(this),success:function(){$(this).parent().parent().hide("fast",function(){var f=false;$(this).parent().parent().parent().find(".be-comment").each(function(){if($(this).css("display")!="none"){f=true}});if(!f){$(this).parent().parent().find(".plus").hide("fast")}})}})});var b=function(){var c="";if($(this).hasClass("category")){c="show=categories&"}var f=$(this).attr("id");var d=f.indexOf("-");f=f.substr(d+1);var e=$(this).parent().parent().parent().height();$(this).parent().parent().parent().find(".backendPost-content").fadeOut("fast");$(this).parent().parent().parent().find(".be-post-loader").fadeIn("fast");$(this).parent().parent().parent().css("height",e);$.ajax({url:"backend.php?"+c+"id="+f+"&action=delete",context:$(this),success:function(){$(this).parent().parent().parent().hide("fast",function(){var g=false;$(this).parent().parent().parent().parent().find(".backendPost").each(function(){if($(this).css("display")!="none"){g=true}});if(!g){$("#no-entries").show("fast")}})}})};var a=function(){var f="./view/templates/";var g=$(this).attr("id");var d=g.indexOf("-");g=g.substr(d+1);$("#form-"+g).validate({messages:{name:"Bitte Namen eingeben"}});if(!$("#form-"+g).valid()){return}var e=$(this).find("img").attr("src");$(this).find("img").attr("src",f+"/images/ajax-loader-post.gif");var c=$(this).parent().parent().find(".name").attr("value");$.ajax({url:"backend.php?show=categories&id="+g+"&action=edit",data:{name:c},type:"POST",context:$(this),success:function(h){$(this).find("img").attr("src",e)}})};$(".save").unbind().click(a);$(".delete").unbind().click(b);$("#add-category").unbind().click(function(){$("#category-create-form").validate({messages:{name:"Bitte Namen eingeben"}});if(!$("#category-create-form").valid()){return}var e="./view/templates/";var d=$("#add-category").find("img").attr("src");$("#add-category").find("img").attr("src",e+"/images/ajax-loader-newcategory.gif");var c=$(this).parent().find(".name").attr("value");$.ajax({url:"backend.php?show=categories&action=add",data:{name:c},type:"POST",context:$(this),success:function(g){$("#name").attr("value","");var f="";f+='<div class="backendPost" style="display: none;">';f+='<img class="be-post-loader" src="'+e+'images/ajax-loader-post.gif" alt="Lade..." />';f+='<div class="backendPost-content">';f+='<span class="postbar">';f+='<a id="category-'+g+'" title="Kategorie löschen" class="delete category pointer"><img src="'+e+'images/x_14x14.png" alt="Löschen" /></a>';f+='<a id="categorysave-'+g+'" title="Kategorie speichern" class="save pointer"><img src="'+e+'images/check_16x13_white.png" alt="Speichern" /></a>';f+='</span><form action="" id="form-'+g+'"><input class="input-category name required" type="text" name="name" value="'+c+'" /></form><div class="clear"></div>';f+="</div>";f+="</div>";$("#backendPosts").append(f);$("#backendPosts").find(".backendPost").last().fadeIn("fast");$("#backendPosts").find(".backendPost").last().find(".delete").unbind().click(b);$("#backendPosts").find(".backendPost").last().find(".save").unbind().click(a);$("#add-category").find("img").attr("src",d)}})})});